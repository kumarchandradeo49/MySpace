<%- include('partials/header'); -%>

<div id="post-container">
  <h1 class="post-h1"><%= title %></h1>
  <p class="post-desc"><%= content %></p>

  <% const ext = file.split('.').pop().toLowerCase(); %>
  <div class="file-preview mt-4">
    <% if (['jpg', 'jpeg', 'png', 'gif', 'webp'].includes(ext)) { %>
      <img src="/uploads/files/<%= file %>" alt="Image" class="preview-img" />
    <% } else if (['pdf'].includes(ext)) { %>
      <iframe src="/uploads/files/<%= file %>" class="preview-frame" frameborder="0"></iframe>
    <% } else { %>
      <a href="/uploads/files/<%= file %>" target="_blank" class="btn btn-info view-btn">
        <i class="bi bi-eye"></i> View File
      </a>
    <% } %>
  </div>

  <a href="/uploads/files/<%= file %>" download class="btn btn-success download-btn">
    <i class="bi bi-download"></i> Download
  </a>

  <form class="edit d-inline-block" action="/posts/<%= postId %>/edit" method="get">
    <button class="btn btn-primary edit-btn" type="submit">
      <i class="bi bi-pencil-square"></i> Edit
    </button>
  </form>

  <form class="delete d-inline-block" action="/posts/<%= postId %>/delete" method="POST">
    <button class="btn btn-danger delete-btn" type="submit">
      <i class="bi bi-trash"></i> Delete
    </button>
  </form>
</div>

<%- include('partials/footer'); -%>